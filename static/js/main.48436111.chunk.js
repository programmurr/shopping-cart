(this["webpackJsonpshopping-cart"]=this["webpackJsonpshopping-cart"]||[]).push([[0],{24:function(e,t,c){},38:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),r=c(17),a=c.n(r),i=(c(24),c(7)),j=c(10),o=c(2),u=c(0);var h=function(e){return Object(u.jsxs)("div",{className:"Home",children:[Object(u.jsx)("h1",{children:"Home"}),Object(u.jsx)("p",{children:"Welcome to the currency-buying site! Lose money in the shop!"})]})},d=c(13),b=c.n(d),l=c(18);c(27).config({path:"../../../.env"});var O=function(e){var t=Object(n.useState)({}),c=Object(i.a)(t,2),s=c[0],r=c[1],a=Object(n.useState)(""),j=Object(i.a)(a,2),o=j[0],h=j[1],d=function(e){h(e.target.value)},O=function(t){t.preventDefault();var c=t.target.querySelector("input"),n=parseInt(o),r=Object.entries(s).filter((function(e){var t=Object(i.a)(e,2),n=t[0];t[1];return n===c.id}));""!==o?(e.onSubmit({currency:c.name,rate:r[0][1],amount:n}),c.value="",h("")):alert("Please enter a currency amount between 1 and 100 units")},p=function(){var e=Object(l.a)(b.a.mark((function e(){var t,c,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://v6.exchangerate-api.com/v6/".concat("2d164a0460fec0d054282040","/latest/GBP"));case 2:return t=e.sent,e.next=5,t.json();case 5:c=e.sent,n=c.conversion_rates,r(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=document.getElementById("stickyNav"),t=document.getElementById("shopPage"),c=e.offsetTop;window.onscroll=function(){!function(e,t,c){window.pageYOffset>=c?(t.classList.add("expand"),e.classList.add("sticky")):(t.classList.remove("expand"),e.classList.remove("sticky"))}(e,t,c)},p()}),[]),Object(u.jsxs)("div",{className:"Shop",id:"shopPage",children:[Object(u.jsx)("h2",{children:"Buy Currency!"}),Object(u.jsx)("div",{className:"ShopList",children:Object.entries(s).map((function(e){var t=Object(i.a)(e,2),c=t[0],n=t[1];return"GBP"===c?Object(u.jsxs)("div",{className:"ShopItem",id:"BaseCurrency",children:[Object(u.jsxs)("p",{children:["Base Currency: ",c]}),Object(u.jsxs)("p",{children:["Rate: ",n,".00"]})]},c):Object(u.jsxs)("form",{onSubmit:O,className:"ShopItem",children:[Object(u.jsxs)("p",{children:["Currency code: ",c]}),Object(u.jsxs)("p",{id:"rate",children:["Rate: ",n.toFixed(2)]}),Object(u.jsx)("label",{htmlFor:c,children:"Amount (1-100 units)"}),Object(u.jsx)("input",{type:"number",id:c,name:c,min:"1",max:"100",amount:o,onChange:d}),Object(u.jsx)("button",{children:"Buy!"})]},c)}))})]})};var p=function(e){var t=e.basket;return Object(u.jsx)("div",{className:"Basket",children:t.map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:["Currency: ",e.currency]}),Object(u.jsxs)("p",{children:["Rate: ",e.rate.toFixed(2)]}),Object(u.jsxs)("p",{children:["Amount: ",e.amount]}),Object(u.jsxs)("p",{children:["Total ",e.currency,": ",(e.rate*e.amount).toFixed(2)]})]},e.currency)}))})};var x=function(e){var t=e.basket,c=Object(n.useState)(0),s=Object(i.a)(c,2),r=s[0],a=s[1];return Object(n.useEffect)((function(){if(0===t.length)a(0);else{var e=[];t.forEach((function(t){e.push(t.amount)}));var c=e.reduce((function(e,t){return e+t}));a(c)}}),[t]),Object(u.jsxs)("div",{className:"Summary",children:[Object(u.jsxs)("p",{children:["Total cost: \xa3",r]}),Object(u.jsx)("button",{children:"Buy"}),Object(u.jsx)("button",{children:"Back to the Shop"})]})};var m=function(e){var t=e.basket;return Object(u.jsxs)("div",{className:"Checkout",children:[Object(u.jsx)("h2",{children:"Checkout"}),Object(u.jsx)(p,{basket:t}),Object(u.jsx)(x,{basket:t})]})};var v=function(e){return Object(u.jsx)("div",{className:"Footer",children:Object(u.jsxs)("p",{children:["Currency rates provided by ",Object(u.jsx)("a",{href:"https://www.exchangerate-api.com/",children:"ExchangeRate-API"})]})})};var f=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],s=t[1];return Object(u.jsx)(j.a,{children:Object(u.jsxs)("div",{className:"AppContent",children:[Object(u.jsxs)("nav",{children:[Object(u.jsx)(j.b,{to:"/shopping-cart/",id:"HomeLink",children:"Home"}),Object(u.jsx)(j.b,{to:"/shop",id:"ShopLink",children:"Shop"})]}),Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/shopping-cart/",children:Object(u.jsx)(h,{})}),Object(u.jsxs)(o.a,{path:"/shop",children:[Object(u.jsxs)("div",{className:"StickyBar",id:"stickyNav",children:[Object(u.jsxs)("p",{children:["Items in Basket: ",c.length]}),Object(u.jsx)(j.b,{to:"/checkout",children:"Checkout"})]}),Object(u.jsx)(O,{onSubmit:function(e){var t=c.concat(e);s(t)}})]}),Object(u.jsx)(o.a,{path:"/checkout",children:Object(u.jsx)(m,{basket:c})})]}),Object(u.jsx)(v,{})]})})};a.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(f,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.48436111.chunk.js.map