{"version":3,"sources":["components/Home.js","components/shop-components/Shop.js","components/shop-components/ItemDetail.js","components/checkout-components/Basket.js","components/checkout-components/Summary.js","components/checkout-components/Checkout.js","components/Footer.js","App.js","index.js"],"names":["Home","props","className","require","config","path","Shop","useState","currencies","setCurrencies","buyAmount","setBuyAmount","handleChange","e","target","value","handleSubmit","preventDefault","input","querySelector","amount","parseInt","rate","Object","entries","filter","currency","id","onSubmit","name","alert","fetchCurrencies","a","fetch","process","data","json","allCurrencies","rates","conversion_rates","useEffect","navBar","document","getElementById","shop","sticky","offsetTop","window","onscroll","pageYOffset","classList","add","remove","handleScroll","map","to","toFixed","htmlFor","type","min","max","onChange","ItemDetail","useParams","Basket","basket","handleRemove","item","onRemove","length","onClick","Summary","cost","setCost","amounts","forEach","push","sum","reduce","accumulator","currentValue","Checkout","Footer","href","App","setBasket","exact","newItem","newBasket","oldBasket","index","findIndex","oldItem","concat","component","removedItem","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.94df6e67.chunk.js","sourcesContent":["import React from 'react';\n\nfunction Home(props) {\n  return (\n    <div className=\"Home\">\n      <h1>Home</h1>\n      <p>\n        Welcome to the currency-buying site! Lose money in the shop!\n      </p>\n    </div>\n  );\n}\n\nexport default Home;","import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nrequire('dotenv').config({ path: '../../../.env' });\n\nfunction Shop(props) {\n  const currencyKey = process.env.REACT_APP_CURRENCY_API\n\n  const [ currencies, setCurrencies ] = useState({});\n  const [ buyAmount, setBuyAmount ] = useState(\"\");\n\n  const handleChange = (e) => {\n    setBuyAmount(e.target.value);\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const form = e.target;\n    const input = form.querySelector('input');\n    const amount = parseInt(buyAmount);\n    const rate = Object.entries(currencies).filter(([currency, rate]) => (currency === input.id));\n\n    if (buyAmount === \"\") {\n      alert('Please enter a currency amount between 1 and 100 units');\n      return;\n    }\n    props.onSubmit({\n      currency: input.name,\n      rate: rate[0][1],\n      amount: amount\n    });\n\n    input.value = \"\";\n    setBuyAmount(\"\");\n  }\n\n  const handleScroll = (navBar, shop, sticky) => {\n    if (window.pageYOffset >= sticky) {\n      shop.classList.add('expand');\n      navBar.classList.add('sticky');\n    } else {\n      shop.classList.remove('expand');\n      navBar.classList.remove('sticky');\n    }\n  }\n\n  const fetchCurrencies = async () => {\n    const data = await fetch (`https://v6.exchangerate-api.com/v6/${currencyKey}/latest/GBP`);\n    const allCurrencies = await data.json();\n    const rates = allCurrencies.conversion_rates;\n    setCurrencies(rates);\n  }\n\n  useEffect(() => {\n    const navBar = document.getElementById('stickyNav');\n    const shop = document.getElementById('shopPage');\n    const sticky = navBar.offsetTop;\n  \n    window.onscroll = () => { handleScroll(navBar, shop, sticky); }\n\n    fetchCurrencies();\n  }, [])\n\n  \n\n  return (\n      <div className=\"Shop\" id=\"shopPage\">\n        <h2>Buy Currency!</h2>\n        <div className=\"ShopList\">\n        {Object.entries(currencies).map(([currency, rate]) => (\n          currency === 'GBP' ? \n            <div key={currency} className=\"ShopItem\" id=\"BaseCurrency\">\n              <p>Base Currency: {currency}</p>\n              <p>Rate: {rate}.00</p>\n            </div>\n            : <form onSubmit={handleSubmit} key={currency} className=\"ShopItem\">\n                <Link to={`/shop/${currency}`}>Currency code: {currency}</Link>\n                <p id=\"rate\">Rate: {rate.toFixed(2)}</p>\n                <label htmlFor={currency}>Amount (1-100 units)</label>\n                <input \n                  type=\"number\" \n                  id={currency} \n                  name={currency} \n                  min=\"1\" \n                  max=\"100\" \n                  amount={buyAmount}\n                  onChange={handleChange}\n                />\n                <button>Buy!</button>\n              </form>\n        ))}\n        </div>\n      </div>\n  );\n}\n\nexport default Shop;","import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nrequire('dotenv').config({ path: '../../../.env' });\n\n\nfunction ItemDetail() {\n\n  let { currency } = useParams();\n\n  const currencyKey = process.env.REACT_APP_CURRENCY_API;\n\n    return (\n      <div className=\"ItemDetail\">\n        <p>Currency is {currency}</p>\n      </div>\n    );\n}\n\nexport default ItemDetail;","import React from 'react';\n\nfunction Basket(props) {\n  const { basket } = props;\n\n  const handleRemove = (item) => () => {\n    props.onRemove(item);\n  }\n\n  if (basket.length === 0) {\n    return (\n      <div className=\"EmptyBasket\">\n        <p>Empty Basket!</p>\n      </div>\n    )\n  } else {\n    return (\n      <div className=\"Basket\">\n        {basket.map((item) => (\n          <div key={item.currency}>\n            <p>Currency: {item.currency}</p>\n            <p>Rate: {item.rate.toFixed(2)}</p>\n            <p>Amount: {item.amount}</p>\n            <p>Total {item.currency}: {(item.rate * item.amount).toFixed(2)}</p>\n            <button onClick={handleRemove(item)}>Remove</button>\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default Basket;","import React, { useState, useEffect } from 'react';\n\nfunction Summary(props) {\n  const { basket } = props;\n\n  const [ cost, setCost ] = useState(0);\n\n  useEffect(() => {\n    if (basket.length === 0) {\n      setCost(0);\n    } else {\n      let amounts = [];\n      basket.forEach(item => {\n        amounts.push(item.amount);\n      });\n      const reducer = (accumulator, currentValue) => accumulator + currentValue;\n      const sum = amounts.reduce(reducer);      \n      setCost(sum);\n    }\n  }, [basket])\n\n  const handleBuy = () => {\n    alert(\"You bought the currency! WHY?!\")\n  }\n\n\n  return (\n    <div className=\"Summary\">\n      <p>Total cost: Â£{cost}</p>\n      <button onClick={handleBuy}>Buy</button>\n    </div>\n  );\n}\n\nexport default Summary;","import React from 'react';\nimport Basket from './Basket';\nimport Summary from './Summary';\n\nfunction Checkout(props) {\n  const { basket } = props; \n\n  const handleRemove = (item) => {\n    props.onRemove(item);\n  }\n  \n  return (\n    <div className=\"Checkout\">\n      <h2>Checkout</h2>\n      <Basket basket={basket} onRemove={handleRemove}/>\n      <Summary basket={basket}/>\n    </div>\n  );\n}\n\nexport default Checkout;","import React from 'react';\n\nfunction Footer(props) {\n  return (\n    <div className=\"Footer\">\n      <p>\n        Currency rates provided by <a href=\"https://www.exchangerate-api.com/\">ExchangeRate-API</a>\n      </p>\n    </div>\n  );\n}\n\nexport default Footer;","import React, { useState } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route, \n  Link\n} from 'react-router-dom';\nimport Home from './components/Home';\nimport Shop from './components/shop-components/Shop';\nimport ItemDetail from './components/shop-components/ItemDetail';\nimport Checkout from './components/checkout-components/Checkout';\nimport Footer from './components/Footer';\n\n\nfunction App() {\n\n  const [ basket, setBasket ] = useState([]);\n\n  // Checks to see if the current purchased item already exists in the cart\n  // If it already exists, it adds to the existing amount\n  // If not, it concatenates it on to the basket\n  const handleSubmit = (newItem) => {\n    const oldBasket = basket;\n    let newBasket;\n\n    if (oldBasket.length > 0) {\n      const index = oldBasket.findIndex((oldItem) => (oldItem.currency === newItem.currency));\n      if (index === -1) {\n        newBasket = oldBasket.concat(newItem);\n      } else {\n        oldBasket[index].amount += newItem.amount;\n        newBasket = oldBasket;\n      }\n    } else {\n      newBasket = oldBasket.concat(newItem);\n    }\n    setBasket(newBasket);\n  }\n\n  const handleRemove = (removedItem) => {\n    const oldBasket = basket;\n    const newBasket = oldBasket.filter((item) => (item.currency !== removedItem.currency));\n    setBasket(newBasket);\n  }\n\n  return (    \n    <Router>\n      <div className=\"AppContent\">\n        <nav>\n              <Link to=\"/shopping-cart/\" id=\"HomeLink\">Home</Link>\n              <Link to=\"/shop\" id=\"ShopLink\">Shop</Link>\n        </nav>\n        <Switch>\n          <Route exact path=\"/shopping-cart/\">\n            <Home />\n          </Route>\n          <Route exact path=\"/shop\">\n            <div className=\"StickyBar\" id=\"stickyNav\">\n              <p>Items in Basket: {basket.length}</p>\n              <Link to=\"/checkout\">Checkout</Link>\n            </div>\n            <Shop \n              onSubmit={handleSubmit}\n            />\n          </Route>\n          <Route path=\"/shop/:currency\" component={ItemDetail}/>\n          <Route path=\"/checkout\">\n            <Checkout basket={basket} onRemove={handleRemove}/>\n          </Route>\n        </Switch>\n        <Footer />\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}