(this["webpackJsonpshopping-cart"]=this["webpackJsonpshopping-cart"]||[]).push([[0],{25:function(e,t,c){},38:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),s=c(18),a=c.n(s),i=(c(25),c(7)),o=c(8),j=c(2),u=c(0);var h=function(e){return Object(u.jsxs)("div",{className:"Home",children:[Object(u.jsx)("h1",{children:"Home"}),Object(u.jsx)("p",{children:"Welcome to the currency-buying site! Lose money in the shop!"})]})},d=c(13),b=c.n(d),l=c(19);c(16).config({path:"../../../.env"});var p=function(e){var t=Object(n.useState)({}),c=Object(i.a)(t,2),r=c[0],s=c[1],a=Object(n.useState)(""),j=Object(i.a)(a,2),h=j[0],d=j[1],p=function(e){d(e.target.value)},O=function(t){t.preventDefault();var c=t.target.querySelector("input"),n=parseInt(h),s=Object.entries(r).filter((function(e){var t=Object(i.a)(e,2),n=t[0];t[1];return n===c.id}));""!==h?(e.onSubmit({currency:c.name,rate:s[0][1],amount:n}),c.value="",d("")):alert("Please enter a currency amount between 1 and 100 units")},x=function(){var e=Object(l.a)(b.a.mark((function e(){var t,c,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://v6.exchangerate-api.com/v6/".concat("2d164a0460fec0d054282040","/latest/GBP"));case 2:return t=e.sent,e.next=5,t.json();case 5:c=e.sent,n=c.conversion_rates,s(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=document.getElementById("stickyNav"),t=document.getElementById("shopPage"),c=e.offsetTop;window.onscroll=function(){!function(e,t,c){window.pageYOffset>=c?(t.classList.add("expand"),e.classList.add("sticky")):(t.classList.remove("expand"),e.classList.remove("sticky"))}(e,t,c)},x()}),[]),Object(u.jsxs)("div",{className:"Shop",id:"shopPage",children:[Object(u.jsx)("h2",{children:"Buy Currency!"}),Object(u.jsx)("div",{className:"ShopList",children:Object.entries(r).map((function(e){var t=Object(i.a)(e,2),c=t[0],n=t[1];return"GBP"===c?Object(u.jsxs)("div",{className:"ShopItem",id:"BaseCurrency",children:[Object(u.jsxs)("p",{children:["Base Currency: ",c]}),Object(u.jsxs)("p",{children:["Rate: ",n,".00"]})]},c):Object(u.jsxs)("form",{onSubmit:O,className:"ShopItem",children:[Object(u.jsxs)(o.b,{to:"/shop/".concat(c),children:["Currency code: ",c]}),Object(u.jsxs)("p",{id:"rate",children:["Rate: ",n.toFixed(2)]}),Object(u.jsx)("label",{htmlFor:c,children:"Amount (1-100 units)"}),Object(u.jsx)("input",{type:"number",id:c,name:c,min:"1",max:"100",amount:h,onChange:p}),Object(u.jsx)("button",{children:"Buy!"})]},c)}))})]})};c(16).config({path:"../../../.env"});var O=function(){var e=Object(j.f)().currency;return Object(u.jsx)("div",{className:"ItemDetail",children:Object(u.jsxs)("p",{children:["Currency is ",e]})})};var x=function(e){var t=e.basket,c=function(t){return function(){e.onRemove(t)}};return 0===t.length?Object(u.jsx)("div",{className:"EmptyBasket",children:Object(u.jsx)("p",{children:"Empty Basket!"})}):Object(u.jsx)("div",{className:"Basket",children:t.map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:["Currency: ",e.currency]}),Object(u.jsxs)("p",{children:["Rate: ",e.rate.toFixed(2)]}),Object(u.jsxs)("p",{children:["Amount: ",e.amount]}),Object(u.jsxs)("p",{children:["Total ",e.currency,": ",(e.rate*e.amount).toFixed(2)]}),Object(u.jsx)("button",{onClick:c(e),children:"Remove"})]},e.currency)}))})};var m=function(e){var t=e.basket,c=Object(n.useState)(0),r=Object(i.a)(c,2),s=r[0],a=r[1];return Object(n.useEffect)((function(){if(0===t.length)a(0);else{var e=[];t.forEach((function(t){e.push(t.amount)}));var c=e.reduce((function(e,t){return e+t}));a(c)}}),[t]),Object(u.jsxs)("div",{className:"Summary",children:[Object(u.jsxs)("p",{children:["Total cost: \xa3",s]}),Object(u.jsx)("button",{onClick:function(){alert("You bought the currency! WHY?!")},children:"Buy"})]})};var v=function(e){var t=e.basket;return Object(u.jsxs)("div",{className:"Checkout",children:[Object(u.jsx)("h2",{children:"Checkout"}),Object(u.jsx)(x,{basket:t,onRemove:function(t){e.onRemove(t)}}),Object(u.jsx)(m,{basket:t})]})};var f=function(e){return Object(u.jsx)("div",{className:"Footer",children:Object(u.jsxs)("p",{children:["Currency rates provided by ",Object(u.jsx)("a",{href:"https://www.exchangerate-api.com/",children:"ExchangeRate-API"})]})})};var y=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],r=t[1];return Object(u.jsx)(o.a,{children:Object(u.jsxs)("div",{className:"AppContent",children:[Object(u.jsxs)("nav",{children:[Object(u.jsx)(o.b,{to:"/shopping-cart/",id:"HomeLink",children:"Home"}),Object(u.jsx)(o.b,{to:"/shop",id:"ShopLink",children:"Shop"})]}),Object(u.jsxs)(j.c,{children:[Object(u.jsx)(j.a,{exact:!0,path:"/shopping-cart/",children:Object(u.jsx)(h,{})}),Object(u.jsxs)(j.a,{exact:!0,path:"/shop",children:[Object(u.jsxs)("div",{className:"StickyBar",id:"stickyNav",children:[Object(u.jsxs)("p",{children:["Items in Basket: ",c.length]}),Object(u.jsx)(o.b,{to:"/checkout",children:"Checkout"})]}),Object(u.jsx)(p,{onSubmit:function(e){var t,n=c;if(n.length>0){var s=n.findIndex((function(t){return t.currency===e.currency}));-1===s?t=n.concat(e):(n[s].amount+=e.amount,t=n)}else t=n.concat(e);r(t)}})]}),Object(u.jsx)(j.a,{path:"/shop/:currency",component:O}),Object(u.jsx)(j.a,{path:"/checkout",children:Object(u.jsx)(v,{basket:c,onRemove:function(e){var t=c.filter((function(t){return t.currency!==e.currency}));r(t)}})})]}),Object(u.jsx)(f,{})]})})};a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(y,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.94df6e67.chunk.js.map