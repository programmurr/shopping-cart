{"version":3,"sources":["components/Home.js","components/shop-components/Shop.js","components/checkout-components/Basket.js","components/checkout-components/Summary.js","components/checkout-components/Checkout.js","components/Footer.js","App.js","index.js"],"names":["Home","props","className","require","config","path","Shop","useState","currencies","setCurrencies","buyAmount","setBuyAmount","handleChange","e","target","value","handleSubmit","preventDefault","input","querySelector","amount","parseInt","rate","Object","entries","filter","currency","id","onSubmit","name","alert","fetchCurrencies","a","fetch","process","data","json","allCurrencies","rates","conversion_rates","useEffect","navBar","document","getElementById","shop","sticky","offsetTop","window","onscroll","pageYOffset","classList","add","remove","handleScroll","map","toFixed","htmlFor","type","min","max","onChange","Basket","basket","item","Summary","cost","setCost","length","amounts","forEach","push","sum","reduce","accumulator","currentValue","Checkout","Footer","href","App","setBasket","to","exact","currencyItem","newBasket","concat","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.48436111.chunk.js","sourcesContent":["import React from 'react';\n\nfunction Home(props) {\n  return (\n    <div className=\"Home\">\n      <h1>Home</h1>\n      <p>\n        Welcome to the currency-buying site! Lose money in the shop!\n      </p>\n    </div>\n  );\n}\n\nexport default Home;","import React, { useEffect, useState } from 'react';\nrequire('dotenv').config({ path: '../../../.env' });\n\nfunction Shop(props) {\n  const currencyKey = process.env.REACT_APP_CURRENCY_API\n\n  const [ currencies, setCurrencies ] = useState({});\n  const [ buyAmount, setBuyAmount ] = useState(\"\");\n\n  const handleChange = (e) => {\n    setBuyAmount(e.target.value);\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const form = e.target;\n    const input = form.querySelector('input');\n    const amount = parseInt(buyAmount);\n    const rate = Object.entries(currencies).filter(([currency, rate]) => (currency === input.id));\n\n    if (buyAmount === \"\") {\n      alert('Please enter a currency amount between 1 and 100 units');\n      return;\n    }\n    props.onSubmit({\n      currency: input.name,\n      rate: rate[0][1],\n      amount: amount\n    });\n\n    input.value = \"\";\n    setBuyAmount(\"\");\n  }\n\n  const handleScroll = (navBar, shop, sticky) => {\n    if (window.pageYOffset >= sticky) {\n      shop.classList.add('expand');\n      navBar.classList.add('sticky');\n    } else {\n      shop.classList.remove('expand');\n      navBar.classList.remove('sticky');\n    }\n  }\n\n  const fetchCurrencies = async () => {\n    const data = await fetch (`https://v6.exchangerate-api.com/v6/${currencyKey}/latest/GBP`);\n    const allCurrencies = await data.json();\n    const rates = allCurrencies.conversion_rates;\n    setCurrencies(rates);\n  }\n\n  useEffect(() => {\n    const navBar = document.getElementById('stickyNav');\n    const shop = document.getElementById('shopPage');\n    const sticky = navBar.offsetTop;\n  \n    window.onscroll = () => { handleScroll(navBar, shop, sticky); }\n\n    fetchCurrencies();\n  }, [])\n\n  \n\n  return (\n      <div className=\"Shop\" id=\"shopPage\">\n        <h2>Buy Currency!</h2>\n        <div className=\"ShopList\">\n        {Object.entries(currencies).map(([currency, rate]) => (\n          currency === 'GBP' ? \n            <div key={currency} className=\"ShopItem\" id=\"BaseCurrency\">\n              <p>Base Currency: {currency}</p>\n              <p>Rate: {rate}.00</p>\n            </div>\n            : <form onSubmit={handleSubmit} key={currency} className=\"ShopItem\">\n                <p>Currency code: {currency}</p>\n                <p id=\"rate\">Rate: {rate.toFixed(2)}</p>\n                <label htmlFor={currency}>Amount (1-100 units)</label>\n                <input \n                  type=\"number\" \n                  id={currency} \n                  name={currency} \n                  min=\"1\" \n                  max=\"100\" \n                  amount={buyAmount}\n                  onChange={handleChange}\n                />\n                <button>Buy!</button>\n              </form>\n        ))}\n        </div>\n      </div>\n  );\n}\n\nexport default Shop;","import React from 'react';\n\nfunction Basket(props) {\n  const { basket } = props;\n\n  return (\n    <div className=\"Basket\">\n      {basket.map((item) => (\n        <div key={item.currency}>\n          <p>Currency: {item.currency}</p>\n          <p>Rate: {item.rate.toFixed(2)}</p>\n          <p>Amount: {item.amount}</p>\n          <p>Total {item.currency}: {(item.rate * item.amount).toFixed(2)}</p>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default Basket;","import React, { useState, useEffect } from 'react';\n\nfunction Summary(props) {\n  const { basket } = props;\n\n  const [ cost, setCost ] = useState(0);\n\n  useEffect(() => {\n    if (basket.length === 0) {\n      setCost(0);\n    } else {\n      let amounts = [];\n      basket.forEach(item => {\n        amounts.push(item.amount);\n      });\n      const reducer = (accumulator, currentValue) => accumulator + currentValue;\n      const sum = amounts.reduce(reducer);      \n      setCost(sum);\n    }\n  }, [basket])\n\n\n  return (\n    <div className=\"Summary\">\n      <p>Total cost: Â£{cost}</p>\n      <button>Buy</button>\n      <button>Back to the Shop</button>\n    </div>\n  );\n}\n\nexport default Summary;","import React from 'react';\nimport Basket from './Basket';\nimport Summary from './Summary';\n\nfunction Checkout(props) {\n  const { basket } = props; \n\n  return (\n    <div className=\"Checkout\">\n      <h2>Checkout</h2>\n      <Basket basket={basket}/>\n      <Summary basket={basket}/>\n    </div>\n  );\n}\n\nexport default Checkout;","import React from 'react';\n\nfunction Footer(props) {\n  return (\n    <div className=\"Footer\">\n      <p>\n        Currency rates provided by <a href=\"https://www.exchangerate-api.com/\">ExchangeRate-API</a>\n      </p>\n    </div>\n  );\n}\n\nexport default Footer;","import React, { useState } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route, \n  Link\n} from 'react-router-dom';\nimport Home from './components/Home';\nimport Shop from './components/shop-components/Shop';\nimport Checkout from './components/checkout-components/Checkout';\nimport Footer from './components/Footer';\n\nfunction App() {\n\n  const [ basket, setBasket ] = useState([]);\n\n  const handleSubmit = (currencyItem) => {\n    const oldBasket = basket;\n    const newBasket = oldBasket.concat(currencyItem);\n    setBasket(newBasket);\n  }\n\n  return (    \n    <Router>\n      <div className=\"AppContent\">\n        <nav>\n              <Link to=\"/shopping-cart/\" id=\"HomeLink\">Home</Link>\n              <Link to=\"/shop\" id=\"ShopLink\">Shop</Link>\n        </nav>\n        <Switch>\n          <Route exact path=\"/shopping-cart/\">\n            <Home />\n          </Route>\n          <Route path=\"/shop\">\n            <div className=\"StickyBar\" id=\"stickyNav\">\n              <p>Items in Basket: {basket.length}</p>\n              <Link to=\"/checkout\">Checkout</Link>\n            </div>\n            <Shop \n              onSubmit={handleSubmit}\n            />\n          </Route>\n          <Route path=\"/checkout\">\n            <Checkout basket={basket}/>\n          </Route>\n        </Switch>\n        <Footer />\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}